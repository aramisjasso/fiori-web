<mvc:View
  controllerName="com.inv.sapfiori.controller.Security"
  xmlns:mvc="sap.ui.core.mvc"
  xmlns="sap.m"
  displayBlock="true">

  <Page title="Security Module">
    <content>

      <IconTabBar>
        <!-- Tab USERS -->
        <items>
          <IconTabFilter text="USERS" key="users" icon="sap-icon://employee">
            <VBox class="sapUiSmallMargin">
              <Toolbar>
                <Button text="Crear Usuario" press="onCrearUsuario"/>
                <Button text="Eliminar Usuario" press="onEliminarUsuario"/>
              </Toolbar>

              <!-- Tabla de usuarios -->
              <Table id="tablaUsuarios" items="{users>/usuarios}" mode="SingleSelectMaster">
                <columns>
                  <Column><Text text="ID"/></Column>
                  <Column><Text text="Nombre"/></Column>
                </columns>
                <items>
                  <ColumnListItem>
                    <cells>
                      <Text text="{users>id}"/>
                      <Text text="{users>nombre}"/>
                    </cells>
                  </ColumnListItem>
                </items>
              </Table>
            </VBox>
          </IconTabFilter>

          <!-- Tab ROLES -->
          <IconTabFilter text="ROLES" key="roles" icon="sap-icon://shield">
            <VBox class="sapUiSmallMargin">
              <Toolbar>
                <Button text="Crear Rol" press="onCrearRol"/>
                <Button text="Eliminar Rol" press="onEliminarRol"/>
              </Toolbar>

              <!-- Tabla de roles -->
            <Table id="tablaRoles" items="{roles>/roles}" mode="MultiSelect">
  <columns>
    <Column><Text text="Role ID"/></Column>
    <Column><Text text="Role Name"/></Column>
    <Column><Text text="Description"/></Column>
    <Column><Text text="Activo"/></Column>
    <Column><Text text="Eliminado"/></Column>
    <Column><Text text="Current"/></Column>
    <Column><Text text="Fecha Registro"/></Column>
    <Column><Text text="Hora Registro"/></Column>
    <Column><Text text="Usuario Registro"/></Column>
    <Column><Text text="Privilegios"/></Column>
  </columns>
  <items>
    <ColumnListItem>
      <cells>
        <Text text="{roles>ROLEID}"/>
        <Text text="{roles>ROLENAME}"/>
        <Text text="{roles>DESCRIPTION}"/>
        <Text text="{roles>DETAIL_ROW/ACTIVED}"/>
        <Text text="{roles>DETAIL_ROW/DELETED}"/>
        <Text text="{roles>DETAIL_ROW/DETAIL_ROW_REG/0/CURRENT}"/>
        <Text text="{roles>DETAIL_ROW/DETAIL_ROW_REG/0/REGDATE}"/>
        <Text text="{roles>DETAIL_ROW/DETAIL_ROW_REG/0/REGTIME}"/>
        <Text text="{roles>DETAIL_ROW/DETAIL_ROW_REG/0/REGUSER}"/>

     <!-- VBox para mostrar los privilegios como una lista -->
        <VBox>
          <!-- Usamos un Text para cada privilegio -->
          <Text text="{roles>PRIVILEGES/0}" visible="{= ${roles>PRIVILEGES/0} !== '*' }"/>
          <Text text="{roles>PRIVILEGES/1}" visible="{= ${roles>PRIVILEGES/1} !== '' }"/>
          <Text text="{roles>PRIVILEGES/2}" visible="{= ${roles>PRIVILEGES/2} !== '' }"/>
          <Text text="{roles>PRIVILEGES/3}" visible="{= ${roles>PRIVILEGES/3} !== '' }"/>
          <!-- Se puede seguir añadiendo más elementos Text según sea necesario -->
        </VBox>

      </cells>
    </ColumnListItem>
  </items>
</Table>

            </VBox>
          </IconTabFilter>

        </items>
      </IconTabBar>

  <Dialog id="createRoleDialog" title="Crear Rol" stretch="false">
    <content>
      <VBox class="sapUiSmallMargin">
        <Label text="Role ID"/>
        <Input id="roleIdInput" placeholder="Ingrese el ID del Rol"/>

        <Label text="Role Name"/>
        <Input id="roleNameInput" placeholder="Ingrese el Nombre del Rol"/>

        <Label text="Description"/>
        <Input id="roleDescriptionInput" placeholder="Ingrese la Descripción del Rol"/>

        <Label text="Active"/>
        <Switch id="roleActiveSwitch" state="true"/>

        <Label text="Privileges"/>
        <VBox id="privilegesContainer">
          <!-- Aquí se agregarán dinámicamente los privilegios -->
        </VBox>

        <HBox>
          <Input id="processIdInput" placeholder="Process ID" width="50%"/>
          <Input id="privilegeIdInput" placeholder="Privilege ID" width="50%"/>
          <Button text="Agregar Privilegio" press="onAddPrivilege"/>
        </HBox>
      </VBox>
    </content>
    <beginButton>
      <Button text="Crear" press="onConfirmCreateRole"/>
    </beginButton>
    <endButton>
      <Button text="Cancelar" press="onCloseRoleDialog"/>
    </endButton>
  </Dialog>


    </content>
  </Page>
</mvc:View>